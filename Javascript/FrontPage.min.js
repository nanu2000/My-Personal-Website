function Animator(a){this._lastTime;this._animation=a;this._stop=false;this.stop=function(){this._stop=true};this.start=function(){this._stop=false;this.requestNextFrame()};this._step=function(c){if(this._stop){return}var b=(c-(this.lastTime||c))/1000;if(b>0.03){b=0.016}this.lastTime=c;this._animation(b);this.requestNextFrame()};this.requestAnimationFramePolyFill=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(b){window.setTimeout(b,1000/60)};this.requestNextFrame=function(){var b=this;this.requestAnimationFramePolyFill.call(window,function(c){b._step(c)})}}function CarouselItem(a){this._element=a;this._startPosition;this._centerAdditor;this._currentTranslateX;this.getCurrentXTranslation=function(){return this._currentTranslateX};this.updateXPosition=function(b){this._currentTranslateX=b;this._element.style.transform="translateX("+b+"px)"};this.getRect=function(){return this._element.getBoundingClientRect()};this.getCenter=function(){return this.getRect().left+this.getRect().width/2};this.getZeroPosition=function(){return -(this._startPosition.left-this._centerAdditor)};this.getLoopPosition=function(b,c){var e=this.getRect().width*c;var f=this.getRect().width/2;var d=(b.width-e)/2;return b.right-d-f};this.recalculateAndResetToNewPosition=function(e,c){var d=this.getRect().width*c;var b=(e-d)/2;this._centerAdditor=b;this.updateXPosition(b);this._startPosition=this.getRect()}}function Caurousel(c,b,a,d){this._container;this._items;this._currentContainerOrientation;this._pxPerSecond=d;this._overflowBuffers;this.initialise=function(){var e=document.getElementsByClassName(b);this._container=document.getElementById(c);this._overflowBuffers=document.getElementsByClassName(a);this._items=Array();for(var f=0;f<e.length;f++){this._items.push(new CarouselItem(e[f]))}this._items.sort(function(h,g){return h.getRect().left>g.getRect().left});this._currentContainerOrientation=this._container.getBoundingClientRect();this.resetAllItemPositions();this._updateOverflowHandlers()};this.resetAllItemPositions=function(){for(var e=0;e<this._items.length;e++){this._items[e].recalculateAndResetToNewPosition(this._currentContainerOrientation.width,this._items.length)}};this._containerOrientationHasChanged=function(){var e=this._container.getBoundingClientRect();if(this._currentContainerOrientation.width!==e.width){this._currentContainerOrientation=e;return true}return false};this.getContainerCenter=function(){return this._currentContainerOrientation.left+this._currentContainerOrientation.width/2};this._loopItem=function(g){var f=this._items[(g+1)%this._items.length];var e=this._items[g].getZeroPosition()+(f.getRect().left-this._items[g].getRect().width);this._items[g].updateXPosition(e)};this._updateItem=function(g,e){var h=this._items[g].getRect();if(h.left>=this._items[g].getLoopPosition(this._currentContainerOrientation,this._items.length)){return g}if(this._items[g].getCenter()>this.getContainerCenter()-h.width&&this._items[g].getCenter()<this.getContainerCenter()+h.width){this._items[g]._element.querySelector("a").className="hover"}else{this._items[g]._element.querySelector("a").className=""}var f=this._items[g].getCurrentXTranslation()+e*this._pxPerSecond;this._items[g].updateXPosition(f);return -1};this._updateOverflowHandlers=function(){var g=this._items[0].getRect().width*this._items.length;var f=(this._currentContainerOrientation.width-g)/2+this._items[0].getRect().width/2;for(var e=0;e<this._overflowBuffers.length;e++){this._overflowBuffers[e].style.width=f+"px";if(f<=0){this._overflowBuffers[e].style.display="none"}else{this._overflowBuffers[e].style.display="block"}}};this.update=function(f){if(this._containerOrientationHasChanged()){this.resetAllItemPositions();this._updateOverflowHandlers()}var h=-1;for(var g=0;g<this._items.length;g++){var e=this._updateItem(g,f);if(e!==-1){h=e}}if(h!==-1){this._loopItem(h)}}}function initFlexItems(){var b=new Caurousel("flex_item_container","flex_item","carousel_overflow_buffer",25);b.initialise();var a=new Animator(b.update.bind(b));a.start()}function executeMobileJavascript(){var b=document.getElementsByClassName("flex_item");for(var a=0;a<b.length;a++){b[a].querySelector("a").className+="hover"}}function runJavascript(){if("ontouchstart" in window){executeMobileJavascript()}initFlexItems()}runJavascript();